<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle Financeiro</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-gray-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const ControleFinanceiro = () => {
          const [transactions, setTransactions] = useState([]);
          const [description, setDescription] = useState('');
          const [amount, setAmount] = useState('');
          const [type, setType] = useState('expense');
          const [category, setCategory] = useState('');
          const [date, setDate] = useState(new Date().toISOString().split('T')[0]);
          const [filterMonth, setFilterMonth] = useState(new Date().toISOString().slice(0, 7));

          const categories = {
            expense: ['Alimenta√ß√£o', 'Transporte', 'Moradia', 'Sa√∫de', 'Lazer', 'Educa√ß√£o', 'Compras', 'Outros'],
            income: ['Sal√°rio', 'Freelance', 'Investimentos', 'Presente', 'Outros']
          };

          const categoryColors = {
            'Alimenta√ß√£o': 'from-orange-600 to-orange-500',
            'Transporte': 'from-blue-600 to-blue-500',
            'Moradia': 'from-purple-600 to-purple-500',
            'Sa√∫de': 'from-red-600 to-red-500',
            'Lazer': 'from-pink-600 to-pink-500',
            'Educa√ß√£o': 'from-indigo-600 to-indigo-500',
            'Compras': 'from-green-600 to-green-500',
            'Sal√°rio': 'from-emerald-600 to-emerald-500',
            'Freelance': 'from-cyan-600 to-cyan-500',
            'Investimentos': 'from-teal-600 to-teal-500',
            'Presente': 'from-rose-600 to-rose-500',
            'Outros': 'from-gray-600 to-gray-500'
          };

          const addTransaction = () => {
            if (!description || !amount || !category) return;

            const newTransaction = {
              id: Date.now(),
              description,
              amount: parseFloat(amount),
              type,
              category,
              date
            };

            setTransactions([newTransaction, ...transactions]);
            setDescription('');
            setAmount('');
            setCategory('');
            setDate(new Date().toISOString().split('T')[0]);
          };

          const deleteTransaction = (id) => {
            setTransactions(transactions.filter(t => t.id !== id));
          };

          const filteredTransactions = transactions.filter(t => 
            t.date.startsWith(filterMonth)
          );

          const totalBalance = transactions.reduce((acc, t) => {
            if (t.type === 'income') {
              acc.income += t.amount;
            } else {
              acc.expense += t.amount;
            }
            return acc;
          }, { income: 0, expense: 0 });

          const accumulatedBalance = totalBalance.income - totalBalance.expense;

          const monthSummary = filteredTransactions.reduce((acc, t) => {
            if (t.type === 'income') {
              acc.income += t.amount;
            } else {
              acc.expense += t.amount;
            }
            return acc;
          }, { income: 0, expense: 0 });

          const categoryExpenses = filteredTransactions
            .filter(t => t.type === 'expense')
            .reduce((acc, t) => {
              acc[t.category] = (acc[t.category] || 0) + t.amount;
              return acc;
            }, {});

          const categoryIncomes = filteredTransactions
            .filter(t => t.type === 'income')
            .reduce((acc, t) => {
              acc[t.category] = (acc[t.category] || 0) + t.amount;
              return acc;
            }, {});

          const formatCurrency = (value) => {
            return new Intl.NumberFormat('pt-BR', {
              style: 'currency',
              currency: 'BRL'
            }).format(value);
          };

          return (
            <div className="min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 p-4 font-sans text-white">
              <div className="max-w-6xl mx-auto">
                <div className="bg-gradient-to-r from-gray-800 to-gray-900 rounded-2xl shadow-2xl p-6 mb-6 border border-yellow-600">
                  <h1 className="text-3xl font-bold text-yellow-500 mb-2 flex items-center gap-2">
                    <span>üí∞</span>
                    Controle Financeiro
                  </h1>
                  <p className="text-gray-300">Gerencie suas finan√ßas pessoais</p>
                </div>

                {/* Cards de Resumo */}
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                  <div className="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl shadow-2xl p-6 border-2 border-yellow-500">
                    <div className="flex items-center justify-between mb-2">
                      <span className="text-gray-300 font-medium">Saldo Acumulado</span>
                      <span>üí∞</span>
                    </div>
                    <p className={`text-3xl font-bold ${accumulatedBalance >= 0 ? 'text-yellow-500' : 'text-red-500'}`}>
                      {formatCurrency(accumulatedBalance)}
                    </p>
                    <p className="text-xs text-gray-400 mt-1">Total de todos os tempos</p>
                  </div>

                  <div className="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl shadow-2xl p-6 border border-gray-700">
                    <div className="flex items-center justify-between mb-2">
                      <span className="text-gray-300 font-medium">Receitas do M√™s</span>
                      <span>üìà</span>
                    </div>
                    <p className="text-3xl font-bold text-green-500">
                      {formatCurrency(monthSummary.income)}
                    </p>
                  </div>

                  <div className="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl shadow-2xl p-6 border border-gray-700">
                    <div className="flex items-center justify-between mb-2">
                      <span className="text-gray-300 font-medium">Despesas do M√™s</span>
                      <span>üìâ</span>
                    </div>
                    <p className="text-3xl font-bold text-red-500">
                      {formatCurrency(monthSummary.expense)}
                    </p>
                  </div>
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                  {/* Formul√°rio */}
                  <div className="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl shadow-2xl p-6 border border-gray-700">
                    <h2 className="text-xl font-bold text-yellow-500 mb-4 flex items-center gap-2">
                      <span>‚ûï</span>
                      Nova Transa√ß√£o
                    </h2>
                    
                    <div className="space-y-4">
                      <div>
                        <label className="block text-sm font-medium text-gray-300 mb-2">Tipo</label>
                        <div className="flex gap-2">
                          <button
                            onClick={() => { setType('income'); setCategory(''); }}
                            className={`flex-1 py-2 rounded-lg font-medium transition-colors ${type === 'income' ? 'bg-gradient-to-r from-yellow-600 to-yellow-500 text-black' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'}`}
                          >
                            Receita
                          </button>
                          <button
                            onClick={() => { setType('expense'); setCategory(''); }}
                            className={`flex-1 py-2 rounded-lg font-medium transition-colors ${type === 'expense' ? 'bg-gradient-to-r from-yellow-600 to-yellow-500 text-black' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'}`}
                          >
                            Despesa
                          </button>
                        </div>
                      </div>

                      <div>
                        <label className="block text-sm font-medium text-gray-300 mb-1">Descri√ß√£o</label>
                        <input
                          type="text"
                          value={description}
                          onChange={(e) => setDescription(e.target.value)}
                          placeholder="Ex: Almo√ßo no restaurante"
                          className="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent text-white placeholder-gray-400"
                        />
                      </div>

                      <div>
                        <label className="block text-sm font-medium text-gray-300 mb-1">Categoria</label>
                        <select
                          value={category}
                          onChange={(e) => setCategory(e.target.value)}
                          className="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent text-white"
                        >
                          <option value="">Selecione...</option>
                          {categories[type].map(cat => (
                            <option key={cat} value={cat}>{cat}</option>
                          ))}
                        </select>
                      </div>

                      <div className="grid grid-cols-2 gap-4">
                        <div>
                          <label className="block text-sm font-medium text-gray-300 mb-1">Valor</label>
                          <input
                            type="number"
                            step="0.01"
                            value={amount}
                            onChange={(e) => setAmount(e.target.value)}
                            placeholder="0,00"
                            className="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent text-white placeholder-gray-400"
                          />
                        </div>
                        <div>
                          <label className="block text-sm font-medium text-gray-300 mb-1">Data</label>
                          <input
                            type="date"
                            value={date}
                            onChange={(e) => setDate(e.target.value)}
                            className="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent text-white"
                          />
                        </div>
                      </div>

                      <button
                        onClick={addTransaction}
                        className="w-full bg-gradient-to-r from-yellow-600 to-yellow-500 text-black py-3 rounded-lg font-bold hover:from-yellow-500 hover:to-yellow-400 transition-all shadow-lg"
                      >
                        Adicionar Transa√ß√£o
                      </button>
                    </div>
                  </div>

                  {/* Receitas por Categoria */}
                  <div className="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl shadow-2xl p-6 border border-gray-700">
                    <h2 className="text-xl font-bold text-green-400 mb-4 flex items-center gap-2">
                      <span>üìà</span> Receitas por Categoria
                    </h2>
                    
                    {Object.keys(categoryIncomes).length > 0 ? (
                      <div className="space-y-4">
                        {Object.entries(categoryIncomes)
                          .sort((a, b) => b[1] - a[1])
                          .map(([cat, amount]) => {
                            const percentage = (amount / monthSummary.income) * 100;
                            const colorClass = categoryColors[cat] || categoryColors['Outros'];
                            return (
                              <div key={cat} className="space-y-2">
                                <div className="flex justify-between items-center">
                                  <span className="font-semibold text-gray-200 text-base">{cat}</span>
                                  <span className="text-green-400 font-bold text-lg">{formatCurrency(amount)}</span>
                                </div>
                                <div className="w-full bg-gray-700 rounded-full h-3 shadow-inner">
                                  <div
                                    className={`bg-gradient-to-r ${colorClass} h-3 rounded-full transition-all shadow-lg`}
                                    style={{ width: `${percentage}%` }}
                                  />
                                </div>
                                <div className="flex justify-between items-center">
                                  <span className="text-sm text-gray-400">{percentage.toFixed(1)}% do total</span>
                                  <span className="text-sm text-gray-400">de {formatCurrency(monthSummary.income)}</span>
                                </div>
                              </div>
                            );
                          })}
                      </div>
                    ) : (
                      <p className="text-gray-400 text-center py-8">Nenhuma receita registrada neste m√™s</p>
                    )}
                  </div>

                  {/* Despesas por Categoria */}
                  <div className="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl shadow-2xl p-6 border border-gray-700">
                    <h2 className="text-xl font-bold text-red-400 mb-4 flex items-center gap-2">
                      <span>üìâ</span> Despesas por Categoria
                    </h2>
                    
                    {Object.keys(categoryExpenses).length > 0 ? (
                      <div className="space-y-4">
                        {Object.entries(categoryExpenses)
                          .sort((a, b) => b[1] - a[1])
                          .map(([cat, amount]) => {
                            const percentage = (amount / monthSummary.expense) * 100;
                            const colorClass = categoryColors[cat] || categoryColors['Outros'];
                            return (
                              <div key={cat} className="space-y-2">
                                <div className="flex justify-between items-center">
                                  <span className="font-semibold text-gray-200 text-base">{cat}</span>
                                  <span className="text-red-400 font-bold text-lg">{formatCurrency(amount)}</span>
                                </div>
                                <div className="w-full bg-gray-700 rounded-full h-3 shadow-inner">
                                  <div
                                    className={`bg-gradient-to-r ${colorClass} h-3 rounded-full transition-all shadow-lg`}
                                    style={{ width: `${percentage}%` }}
                                  />
                                </div>
                                <div className="flex justify-between items-center">
                                  <span className="text-sm text-gray-400">{percentage.toFixed(1)}% do total</span>
                                  <span className="text-sm text-gray-400">de {formatCurrency(monthSummary.expense)}</span>
                                </div>
                              </div>
                            );
                          })}
                      </div>
                    ) : (
                      <p className="text-gray-400 text-center py-8">Nenhuma despesa registrada neste m√™s</p>
                    )}
                  </div>
                </div>

                {/* Lista de Transa√ß√µes */}
                <div className="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl shadow-2xl p-6 mt-6 border border-gray-700">
                  <div className="flex items-center justify-between mb-4">
                    <h2 className="text-xl font-bold text-yellow-500 flex items-center gap-2">
                      <span>üìÖ</span> Transa√ß√µes
                    </h2>
                    <div className="flex items-center gap-2">
                      <span className="text-gray-400">üîç</span>
                      <input
                        type="month"
                        value={filterMonth}
                        onChange={(e) => setFilterMonth(e.target.value)}
                        className="px-3 py-1 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent text-white"
                      />
                    </div>
                  </div>

                  <div className="space-y-2 max-h-96 overflow-y-auto">
                    {filteredTransactions.length > 0 ? (
                      filteredTransactions.map(transaction => (
                        <div key={transaction.id} className="flex items-center justify-between p-4 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors border border-gray-600">
                          <div className="flex items-center gap-3">
                            <div className={`p-2 rounded-full ${transaction.type === 'income' ? 'bg-green-900 border border-green-600' : 'bg-red-900 border border-red-600'}`}>
                              {transaction.type === 'income' ? <span>üìà</span> : <span>üìâ</span>}
                            </div>
                            <div>
                              <p className="font-medium text-gray-100">{transaction.description}</p>
                              <p className="text-sm text-gray-400">
                                {transaction.category} ‚Ä¢ {new Date(transaction.date + 'T00:00:00').toLocaleDateString('pt-BR')}
                              </p>
                            </div>
                          </div>
                          <div className="flex items-center gap-3">
                            <span className={`text-lg font-bold ${transaction.type === 'income' ? 'text-green-400' : 'text-red-400'}`}>
                              {transaction.type === 'income' ? '+' : '-'} {formatCurrency(transaction.amount)}
                            </span>
                            <button
                              onClick={() => deleteTransaction(transaction.id)}
                              className="text-red-400 hover:text-red-300 transition-colors text-xl"
                            >
                              üóëÔ∏è
                            </button>
                          </div>
                        </div>
                      ))
                    ) : (
                      <p className="text-gray-400 text-center py-8">Nenhuma transa√ß√£o neste per√≠odo</p>
                    )}
                  </div>
                </div>
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ControleFinanceiro />);
    </script>
</body>
</html>
